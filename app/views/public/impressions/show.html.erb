<h3>投稿詳細</h3>
<% if user_signed_in? %>
<%= flash[:notice] %>
<% end %>
<%= @impression.title %>
<%= @impression.body %>
<% if @impression.user == current_user %>
<%= link_to "編集", edit_impression_path(@impression.id) %>
<%= link_to "削除", impression_path(@impression), method: :delete, "data_confirm" => "後悔しませんね？" %>
<% end %>

<% if user_signed_in? %>
<% if @impression.favorited_by?(current_user) %>
<%= link_to impression_favorite_path(@impression), method: :delete do %>
<%= @impression.favorites.count %>いいね
<% end %>
<% else %>
<%= link_to impression_favorite_path(@impression), method: :post do %>
<%= @impression.favorites.count %>いいね
<% end %>
<% end %>
<% else %>
<%= @impression.favorites.count %>いいね
<% end %>


<% @impression.comments.each do |comment| %>
<%= comment.user.name %>
<%= comment.comment %>
<% if comment.user == current_user %>
<%= link_to "削除", impression_comment_path(comment.impression, comment), method: :delete %>
<% end %>
<% end %>

<%= form_with model: [@impression, @comment] do |f| %>
<%= f.text_area :comment %>
<%= f.submit '送信'%>
<% end %>